<div class="bible-tracker">
  <div class="loading-overlay" *ngIf="isLoading$ | async">
    <app-spinner></app-spinner>
  </div>

  <div class="tracker-header">
    <h1>Bible Reading Tracker</h1>

    <div class="stats-summary" *ngIf="statistics$ | async as stats">
      <div class="stat-card">
        <div class="stat-value">{{ stats.overallPercentage | number: '1.1-1' }}%</div>
        <div class="stat-label">Complete</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">{{ stats.versesRead | number }}</div>
        <div class="stat-label">Verses Read</div>
      </div>
      <div class="stat-card" *ngIf="todaysProgress$ | async as today">
        <div class="stat-value">{{ today.versesReadToday }}</div>
        <div class="stat-label">Today</div>
      </div>
    </div>
  </div>

  <div class="view-controls">
    <button
      class="view-btn"
      [class.active]="(viewMode$ | async) === 'grid'"
      (click)="setViewMode('grid')"
    >
      Grid View
    </button>
    <button
      class="view-btn"
      [class.active]="(viewMode$ | async) === 'list'"
      (click)="setViewMode('list')"
    >
      List View
    </button>
    <button
      class="view-btn"
      [class.active]="(viewMode$ | async) === 'reading'"
      (click)="setViewMode('reading')"
    >
      Reading View
    </button>
  </div>

  <div class="books-container">
    <app-bible-tracker-book-grid
      [books]="(books$ | async) || []"
      [viewMode]="(viewMode$ | async) || 'grid'"
      (bookSelected)="onBookSelected($event)"
      (versesMarked)="onVersesMarked($event)"
    ></app-bible-tracker-book-grid>
  </div>
</div>