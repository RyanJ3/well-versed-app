<div class="w-full max-w-4xl mx-auto p-6 bg-gray-100">
  <div class="bg-white rounded-xl shadow-lg p-8">
    <div class="flex justify-between items-start mb-8">
      <div>
        <div class="text-5xl font-black text-gray-900 tracking-tight">
          {{ memorizedVerses | number }}
        </div>
        <div class="text-base font-medium text-gray-600 mt-2">Verses Memorized</div>
        <div class="flex items-center gap-2 mt-3">
          <div class="text-2xl font-bold text-green-600">{{ percentComplete }}%</div>
          <div class="text-base font-semibold text-green-600">Complete</div>
        </div>
      </div>
      <button
        (click)="toggleProgressView()"
        class="flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-gray-800 to-gray-900 hover:from-gray-900 hover:to-black text-white rounded-lg text-sm font-bold shadow-md hover:shadow-xl transform hover:-translate-y-0.5 transition-all"
      >
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 3v18m9-9H3"/>
        </svg>
        View {{ progressViewMode === 'testament' ? 'Groups' : 'Testament' }}
      </button>
    </div>

    <div class="mt-6">
      <div
        class="flex h-12 rounded-full overflow-hidden shadow-2xl bg-gray-200 relative"
        [ngStyle]="{ 'box-shadow': 'inset 0 4px 6px -1px rgba(0, 0, 0, 0.2), 0 10px 15px -3px rgba(0, 0, 0, 0.1)' }"
      >
        <ng-container *ngFor="let segment of segments; let i = index; let last = last">
          <div
            class="flex items-center justify-center relative transition-all duration-500 hover:brightness-110 cursor-pointer group"
            [ngStyle]="{
              width: segment.percent + '%',
              background: segment.gradient,
              'border-top-left-radius': i === 0 ? '9999px' : '0',
              'border-bottom-left-radius': i === 0 ? '9999px' : '0',
              'border-top-right-radius': last ? '9999px' : '0',
              'border-bottom-right-radius': last ? '9999px' : '0',
              'box-shadow': segment.name !== 'Remaining' ? 'inset 0 2px 4px rgba(0,0,0,0.1)' : 'none',
              transform: 'translateZ(0)'
            }"
            [attr.title]="segment.name + ': ' + (segment.verses | number) + ' verses (' + segment.percent + '%)'"
          >
            <span *ngIf="segment.percent > 5 && segment.shortName" class="text-white text-sm font-black tracking-wide drop-shadow-lg group-hover:scale-110 transition-transform">
              {{ segment.shortName }}
            </span>
            <span *ngIf="segment.percent > 2 && segment.percent <= 5 && segment.shortName" class="text-white text-xs font-bold drop-shadow-md">
              {{ segment.percent }}%
            </span>
          </div>
        </ng-container>
      </div>

      <div class="flex flex-wrap gap-6 mt-8">
        <ng-container *ngFor="let segment of segments">
          <div *ngIf="segment.name !== 'Remaining'" class="flex items-center gap-2 group cursor-pointer">
            <div
              class="w-4 h-4 rounded shadow-md group-hover:scale-125 transition-transform"
              [ngStyle]="{ background: segment.gradient, 'box-shadow': '0 2px 4px ' + segment.color + '40' }"
            ></div>
            <span class="text-gray-700 font-medium text-base">{{ segment.name }}</span>
            <span class="font-black text-gray-900 text-lg ml-1">{{ segment.percent }}%</span>
          </div>
        </ng-container>
      </div>
    </div>

    <div class="mt-8 pt-6 border-t border-gray-200">
      <div class="grid grid-cols-3 gap-4 text-center">
        <div>
          <div class="text-3xl font-black text-gray-900">{{ totalVerses | number }}</div>
          <div class="text-sm font-medium text-gray-600 mt-1">Total Verses</div>
        </div>
        <div>
          <div class="text-3xl font-black text-orange-600">{{ oldTestamentMemorized | number }}</div>
          <div class="text-sm font-medium text-gray-600 mt-1">Old Testament</div>
        </div>
        <div>
          <div class="text-3xl font-black text-indigo-600">{{ newTestamentMemorized | number }}</div>
          <div class="text-sm font-medium text-gray-600 mt-1">New Testament</div>
        </div>
      </div>
    </div>
  </div>
</div>
