<!-- src/app/stats/stats.component.html -->
<div class="stats-container">
  <h1 class="page-title">My Scripture Stats</h1>
  
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="loading-spinner"></div>
    <p>Loading your statistics...</p>
  </div>

  <div *ngIf="!isLoading" class="stats-content">
    <!-- Overview Cards -->
    <div class="stats-overview">
      <kendo-card class="stat-card" *ngFor="let stat of overviewStats">
        <kendo-card-body>
          <div class="stat-content">
            <div class="stat-icon">{{ stat.icon }}</div>
            <div class="stat-number">{{ stat.value }}</div>
            <div class="stat-label">{{ stat.label }}</div>
            <div class="stat-change" [class.positive]="stat.change > 0" [class.negative]="stat.change < 0">
              {{ stat.change > 0 ? '+' : '' }}{{ stat.change }}% this week
            </div>
          </div>
        </kendo-card-body>
      </kendo-card>
    </div>

    <!-- Daily Activity Chart -->
    <kendo-card class="chart-section">
      <kendo-card-header>
        <h2>Daily Activity</h2>
      </kendo-card-header>
      <kendo-card-body>
        <kendo-chart>
          <kendo-chart-series>
            <kendo-chart-series-item
              [data]="dailyActivityData"
              type="column"
              field="verses"
              categoryField="date"
              [color]="'#3b82f6'">
            </kendo-chart-series-item>
          </kendo-chart-series>
          <kendo-chart-category-axis>
            <kendo-chart-category-axis-item [labels]="{ rotation: -45 }">
            </kendo-chart-category-axis-item>
          </kendo-chart-category-axis>
        </kendo-chart>
      </kendo-card-body>
    </kendo-card>

    <!-- Book Completion Heatmap -->
    <kendo-card class="heatmap-section">
      <kendo-card-header>
        <h2>Book Completion Status</h2>
      </kendo-card-header>
      <kendo-card-body>
        <div class="books-heatmap">
          <div *ngFor="let book of booksHeatmapData" 
               class="book-tile" 
               [style.background-color]="getHeatmapColor(book.percentage)"
               [attr.data-percentage]="book.percentage">
            <span class="book-abbr">{{ book.abbr }}</span>
            <div class="book-tooltip">
              <strong>{{ book.name }}</strong>
              <span>{{ book.percentage }}% Complete</span>
              <span>{{ book.verses }} verses</span>
            </div>
          </div>
        </div>
        
        <div class="heatmap-legend">
          <span class="legend-label">0%</span>
          <div class="gradient-bar"></div>
          <span class="legend-label">100%</span>
        </div>
      </kendo-card-body>
    </kendo-card>
  </div>
</div>